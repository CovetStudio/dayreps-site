!function(){"use strict";var n,s,o,t,e={animate:!0,layout:"justified",filter:"*",filterControls:"",autoConsiderScrollBars:!0,onBeforeOptionsChanged:function(){},onOptionsChanged:function(){},onBeforeRender:function(){},onRender:function(){},autoInitOnDomReady:!0,autoInitOnDomMutation:!0,autoSyncChildListMutation:!0,useOptionAttributes:!0,autoSyncAttributesMutation:!0,autoSyncChildClassMutation:!0},i={},r=null,a=0,l=null,u={isTruly:function(t){return!!t&&("string"!=typeof t||"false"!==t.toLowerCase())},expectArray:function(t){return u.isArrayLike(t)?t:[t]},isArrayLike:function(t){return t.length===+t.length&&"string"!=typeof t},inArray:function(t,e){return-1!==t.indexOf(e)},objectWalk:function(t,e){var i;if(e(t),"object"==typeof t)for(i in t)u.objectWalk(t[i],e)},objectAssign:function(t){var e,i;for(e=1;e<arguments.length;e++)for(i in arguments[e])t[i]=arguments[e][i];return t},optionsMerge:function(t,e){var i;for(i in e)void 0!==t[i]&&(t[i]=e[i]);return t},isValidCssSelector:function(t){var e=!1;if("string"==typeof t)try{u.matches(document.body,t),e=!0}catch(t){}return e},matches:Element.prototype.matches?function(t,e){return t.matches(e)}:Element.prototype.msMatchesSelector?function(t,e){return t.msMatchesSelector(e)}:Element.prototype.webkitMatchesSelector?function(t,e){return t.webkitMatchesSelector(e)}:function(t,e){for(var i=(t.document||t.ownerDocument).querySelectorAll(e),n=i.length;0<=--n&&i.item(n)!==t;);return-1<n},changeMultipleClassNames:(t=document.createElement("div").classList,t.add("a","b"),t.contains("b")?function(t,e,i){t.classList[e?"add":"remove"].apply(t.classList,i)}:function(t,e,i){for(var n=i.length,s=e?"add":"remove",o=n;o--;)t.classList[s](i[n-o-1])}),expectNaturalImageSize:(o=[],s=function(){var t;for(t=0;t<o.length;t++)(o[t].img.naturalWidth&&o[t].img.naturalHeight||o[t].ready)&&(o[t].callback(o[t].img,!o[t].error),o.splice(t,1),t--);o.length||(clearInterval(n),n=null)},function(t,e){var i={img:t,callback:e||function(){},imgB:document.createElement("img"),ready:!1,error:!1};i.imgB.addEventListener("load",function(){i.ready=!0},!1),i.imgB.addEventListener("error",function(){i.ready=!0,i.error=!0},!1),i.imgB.src=i.img.src,o.push(i),n||(n=setInterval(s,0))}),processLazyLoading:function(){if(null!==l){m();for(var t,e,i,n=l.length,s=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=[];n--;)e=(t=l[n].image.getBoundingClientRect()).right/(s+(t.right-t.left)),i=t.bottom/(o+(t.bottom-t.top)),-.5<e&&e<1.5&&-.5<i&&i<1.5&&r.push(l.splice(n,1)[0]);for(n=0;n<r.length;n++)r[n].item.contentElement.classList.add("gridzyItemLoading"),r[n].image.src=r[n].src}},registerReadOnlyObjectParameters:function(t,e){var i;for(i in e)Object.defineProperty(t,i,{value:e[i],enumerable:!0})},completeDefaultOptionsObject:function(){r!==Gridzy._defaultOptions.layout&&void 0!==Gridzy._layouts[Gridzy._defaultOptions.layout]&&(Gridzy._defaultOptions=u.optionsMerge(u.cloneDefaultOptionsTemplate(Gridzy._defaultOptions.layout),Gridzy._defaultOptions),r=Gridzy._defaultOptions.layout)},cloneDefaultOptionsTemplate:function(t){return void 0===i[t]&&void 0!==Gridzy._layouts[t]&&(i[t]=u.objectAssign({},Gridzy._layouts[t]._defaultOptions,e)),void 0!==i[t]?u.objectAssign({},i[t]):{}}},d=!0;function m(){d=!1,setTimeout(function(){d=!0},0)}var h=new function(){var e=!1,i=new MutationObserver(function(){d&&g()});this.reset=function(){var t=Gridzy._defaultOptions.autoInitOnDomMutation;e!==!!t&&(t?(g(),i.observe(document.body,{attributes:!0,attributeFilter:["class"],subtree:!0,childList:!0})):i.disconnect(),e=!!t)}};function c(t){var e=getComputedStyle(t.element),i={actualBox:null,borderBox:{width:t.element.offsetWidth,height:t.element.offsetHeight},paddingBox:{width:t.element.clientWidth,height:t.element.clientHeight},contentBox:null,border:{top:parseInt(e.borderTopWidth),right:parseInt(e.borderRightWidth),bottom:parseInt(e.borderBottomWidth),left:parseInt(e.borderLeftWidth)},padding:{top:parseInt(e.paddingTop),right:parseInt(e.paddingRight),bottom:parseInt(e.paddingBottom),left:parseInt(e.paddingLeft)}};i.contentBox={width:i.paddingBox.width-i.padding.left-i.padding.right,height:i.paddingBox.height-i.padding.top-i.padding.bottom},i.actualBox="border-box"===e.boxSizing?i.borderBox:i.contentBox,u.registerReadOnlyObjectParameters(this,{gridzyInstance:t,dimensions:i,items:[],layoutStorage:t._layoutStorage}),this.styleToApply="";for(var n=t._allItems.length;n--;)this.items.unshift(new y(t._allItems[n]))}function y(t){u.registerReadOnlyObjectParameters(this,{element:t.contentElement,valid:t.valid,imageError:t.failures,matchFilter:t.matchFilter,width:t.size[0],height:t.size[1],aspectRatio:t.ratio,layoutStorage:t.layoutStorage}),this.visible=t.visible,this.styleToApply=""}function g(){for(var t=document.getElementsByClassName("gridzy"),e=t.length;e--;)void 0===t[e].gridzy&&new Gridzy(t[e])}window.GridzyLayout=function(t){"string"==typeof t.name&&void 0===Gridzy._layouts[t.name]&&(this.name=t.name,this._defaultOptions=t&&"object"==typeof t.options?t.options:{},this._handler=t&&"function"==typeof t.handler?t.handler:function(){},Gridzy._layouts[t.name]=this)},GridzyLayout.prototype={constructor:GridzyLayout,set handler(t){},get handler(){return this._handler}},window.Gridzy=function(t,e){var i,n=void 0===t.gridzy,r=n?this:t.gridzy,s=0;if(e=e||{},r._options=Gridzy.getDefaultOptions(),u.objectAssign({},r._options,e).useOptionAttributes&&(e=u.objectAssign({},r._getOptionParametersFromElement(t),e)),n){for(i in t.gridzy=r,u.registerReadOnlyObjectParameters(r,{element:t,id:++a,version:"2.1.1",_allItems:[],_layoutStorage:{},_filterControls:[],_itemVisibilityClasses:{null_true:{add:["gridzyItemInitialToVisible"],remove:[]},null_false:{add:["gridzyItemHidden"],remove:[]},false_true:{add:["gridzyItemHiddenToVisible"],remove:[]},true_false:{add:["gridzyItemVisibleToHidden"],remove:[]},true_true:{add:["gridzyItemVisibleToVisible"],remove:[]},true:{add:["gridzyItemVisible"],remove:[]},false:{add:["gridzyItemHidden"],remove:[]},null:{add:[],remove:[]}},_itemVisibilityClassesArray:[],_insertQueue:{maxQueueTime:1e3,maxQuietTime:400,items:[],lastProcess:null,timer:null},_elementMutationObserverConfig:{attributes:!1,childList:!1},_elementMutationObserver:new MutationObserver(function(t){if(d){var i={},n=!1,s=!1,o=!1;t.forEach(function(t){switch(t.type){case"attributes":if("class"===t.attributeName&&r._options.useOptionAttributes)r._options.animate!==t.target.classList.contains("gridzyAnimated")&&void 0===i.animate&&(i.animate=!r._options.animate,n=!0);else if("style"===t.attributeName)s=!0;else if(0===t.attributeName.indexOf("data-gridzy-")&&r._options.useOptionAttributes){var e=r._getOptionParametersFromElement(null,null,t.attributeName);i[e.name]=e.value,n=!0}break;case"childList":s=o=!0}}),o&&r._syncElements(),n?r.setOptions(i):s&&r.render()}}),_childMutationObserverConfig:{attributes:!1,attributeFilter:["class"]},_childMutationObserver:new MutationObserver(function(t){if(d){var e=r._options.filter,i=!1;t.forEach(function(t){switch(t.type){case"attributes":void 0!==t.target.gridzyItem&&r._setMatchFilter(t.target.gridzyItem,e)&&(i=!0)}}),i&&r.render()}})}),r._itemIdAutoIncrement=0,u.objectWalk(r._itemVisibilityClasses,function(t){"string"==typeof t&&-1===r._itemVisibilityClassesArray.indexOf(t)&&r._itemVisibilityClassesArray.push(t)}),r._itemVisibilityClasses)r._itemVisibilityClasses[i].remove=r._itemVisibilityClassesArray.filter(function(t){return r._itemVisibilityClasses[i].add.indexOf(t)<0});r._updateOptionParameters(e),m(),r.element.setAttribute("data-gridzyid",r.id),r.element.setAttribute("data-gridzyversion",r.version),r.element.addEventListener("animationend",function(t){t.target.gridzyItem&&(m(),u.changeMultipleClassNames(t.target,!0,r._itemVisibilityClasses[JSON.stringify(t.target.gridzyItem.visible)].add),u.changeMultipleClassNames(t.target,!1,r._itemVisibilityClasses[JSON.stringify(t.target.gridzyItem.visible)].remove))}),r._syncElements(),s=r.element.clientWidth,window.addEventListener("resize",function(){r.element.clientWidth!==s&&(s=r.element.clientWidth,r.render())},!1),document.addEventListener("touchstart",function(){},!0)}else r.setOptions(e);return r},Gridzy._layouts={},Gridzy._defaultOptions=u.objectAssign({},e),Gridzy.setDefaultOptions=function(t){void 0!==t.layout&&Gridzy._defaultOptions.layout!==t.layout&&void 0!==Gridzy._layouts[t.layout]&&(Gridzy._defaultOptions.layout=t.layout),u.completeDefaultOptionsObject(),Gridzy._defaultOptions=u.optionsMerge(Gridzy._defaultOptions,t),h.reset()},Gridzy.getDefaultOptions=function(t){return t&&t!==Gridzy._defaultOptions.layout&&"undefiend"!=typeof Gridzy._layouts[t]?u.optionsMerge(u.cloneDefaultOptionsTemplate(t),Gridzy._defaultOptions):(u.completeDefaultOptionsObject(),u.objectAssign({},Gridzy._defaultOptions))},Gridzy.getDefaultOption=function(t){return u.completeDefaultOptionsObject(),void 0!==Gridzy._defaultOptions[t]?Gridzy._defaultOptions[t]:null},Gridzy.prototype={IMG_FAILURE:0,IMG_LOADING:1,IMG_LOADING_READY:2,IMG_READY:3,IMG_FINISHED:4,ITEM_REGISTERED:1,ITEM_INSERT_QUEUE:2,ITEM_INSERTED:3,setOptions:function(t){this._updateOptionParameters(t),this.render(),u.processLazyLoading()},getOptions:function(){return u.objectAssign({},this._options)},getOption:function(t){return void 0!==this._options[t]?this._options[t]:null},syncAttributes:function(){this._options.useOptionAttributes&&this.setOptions(this._getOptionParametersFromElement())},syncChildList:function(){this._syncElements(),this.render()},render:function(){var t,e,i,n=this._getRenderObject(),s=this._options.filter;for(this._options.onBeforeRender(this),m(),t=n.items.length;t--;)(e=n.items[t]).valid&&!e.element.gridzyItem.visible&&(e.element.style.cssText=e.element.style.cssText+"; "+e.styleToApply+"; transition: none; ");for(document.body.offsetWidth,n.gridzyInstance.element.style.cssText=n.gridzyInstance.element.style.cssText+"; "+n.styleToApply,t=n.items.length;t--;)(e=n.items[t]).valid&&(e.element.gridzyItem.visible?e.element.style.cssText=e.element.style.cssText+"; "+e.styleToApply:e.element.style.transition="",(i=this._itemVisibilityClasses[JSON.stringify(e.element.gridzyItem.visible)+"_"+JSON.stringify(e.visible)])&&(u.changeMultipleClassNames(e.element,!0,i.add||[]),u.changeMultipleClassNames(e.element,!1,i.remove||[])),e.element.gridzyItem.visible=e.visible);for(t=n.items.length;t--;)(e=n.items[t]).valid&&(this._setMatchFilter(e.element.gridzyItem,s),"none"===getComputedStyle(e.element).animationName&&(i=this._itemVisibilityClasses[JSON.stringify(e.visible)],u.changeMultipleClassNames(e.element,!0,i.add||[]),u.changeMultipleClassNames(e.element,!1,i.remove||[])));this._options.onRender(this)},_resetElementMutationObserver:function(){var t,e=this._elementMutationObserverConfig,i=!1,n=e.attributes||e.childList;e.attributes!==this._options.autoSyncAttributesMutation&&(e.attributes=!e.attributes,i=!0),e.childList!==this._options.autoSyncChildListMutation&&(e.childList=!e.childList,i=!0),t=e.attributes||e.childList,i&&(n&&this._elementMutationObserver.disconnect(),t&&this._elementMutationObserver.observe(this.element,u.objectAssign({},e)))},_resetChildMutationObserver:function(t){var e,i,n,s,o,r=this._childMutationObserverConfig,a=!1,l=r.attributes,d=!1;if(r.attributes!==this._options.autoSyncChildClassMutation&&(r.attributes=!r.attributes,a=!0),i=r.attributes,(a||t)&&(l&&this._childMutationObserver.disconnect(),i))for(e=u.objectAssign({},r),s=this._options.filter,o=this._allItems.length;o--;)n=this._allItems[o],this._childMutationObserver.observe(n.contentElement,e),this._setMatchFilter(n,s)&&(d=!0);d&&this.render()},_setMatchFilter:function(t,e){if(t.status===this.ITEM_INSERTED){var i=u.matches(t.contentElement,e);if(i!==t.matchFilter)return t.matchFilter=i,!0}return!1},_filterControlEventHandler:function(t){var e,i,n=this._filterControls.length,s=[],o=t.target;for("OPTION"===o.nodeName&&(o=o.parentNode);n--;)if(o===(i=this._filterControls[n]))if("SELECT"===i.nodeName)for(e=i.options.length;e--;)i.options[e].selected&&(s=s.concat(i.options[e].value));else(i.checked||"checkbox"!==i.type)&&(s=s.concat(i.value));else if(i.checked)"checkbox"===o.type&&"checkbox"===i.type?s=s.concat(i.value):i.checked=!1;else if("SELECT"===i.nodeName)for(e=i.options.length;e--;)i.options[e].selected=!1;this.setOptions({filter:s.join(", ")||":not(*)"})},_getRenderObject:function(){var t,e=this._options.autoConsiderScrollBars,i=new c(this),n=!1,s=i.gridzyInstance.element,o=null,r=null,a=i.gridzyInstance.element.offsetWidth,l=i.gridzyInstance.element.style.position,d=i.gridzyInstance.element.style.cssText,u=!1;if(this._prepareRenderObject(i),e){for(;s.parentNode&&"#document"!==s.parentNode.nodeName;)if(s=s.parentNode,"auto"===(o=getComputedStyle(s).overflowY)||"BODY"===s.nodeName&&"visible"===o){u=!0,(r="BODY"===s.nodeName?Math.max(document.documentElement.clientHeight,window.innerHeight||0):s.offsetHeight)<i.gridzyInstance.element.offsetHeight&&r<(t=(t=i.styleToApply.match(/height:\s*([0-9]+)px;/))?parseInt(t[1]):null)&&(u=!1);break}u&&(i.gridzyInstance.element.style.cssText=d+"; "+i.styleToApply+"; transition: none; animation: none; overflow: hidden; ",a!==i.gridzyInstance.element.offsetWidth&&(i.gridzyInstance.element.style.position=l,i=new c(this),n=!0),i.gridzyInstance.element.style.cssText=d+"; transition: none; animation: none; ",document.body.offsetWidth,i.gridzyInstance.element.style.cssText=d,document.body.offsetWidth,n&&this._prepareRenderObject(i))}return i},_prepareRenderObject:function(t){Gridzy._layouts[this._options.layout].handler(t),this.element.children.length&&this.element.children[0].offsetParent!==this.element&&(t.styleToApply+="; position: relative; "),"block"!==this.element.style.display&&(t.styleToApply+="; display: block; ")},_syncElements:function(){var t,e,i=this.element.children,n=this.getOption("filter");for(t=this._allItems.length=0;t<i.length;t++)e=void 0===i[t].gridzyItem?this._createItem(i[t]):i[t].gridzyItem,this._setMatchFilter(e,n),this._allItems.push(e);this._resetChildMutationObserver(!0)},_createItem:function(t){0===this._insertQueue.items.length&&(this._insertQueue.lastProcess=(new Date).getTime()),m(),u.changeMultipleClassNames(t,!1,this._itemVisibilityClassesArray.concat(["gridzyItem","gridzyItemLoading","gridzyItemInitializing","gridzyItemReady","gridzyItemComplete"]));var s={id:++this._itemIdAutoIncrement,contentElement:t,size:[0,0],ratio:0,failures:!1,status:this.ITEM_REGISTERED,images:[],imagesStatus:[],imagesInfo:[],matchFilter:null,layoutStorage:{},visible:null};(t.gridzyItem=s).contentElement.setAttribute("data-gridzyitemid",s.id),s.contentElement.style.visibility="hidden",s.contentElement.style.position="absolute",u.changeMultipleClassNames(s.contentElement,!0,["gridzyItem","gridzyItemLoading","gridzyItemInitializing"]);for(var e="IMG"===t.nodeName?[t]:t.querySelectorAll("img"),i=e.length;i--;)(function(t){s.images.push(t);var e=t.getAttribute("width"),i=t.getAttribute("height"),n=t.getAttribute("data-gridzylazysrc");!t.getAttribute("src")&&n&&(e&&i?t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEHAAEALAAAAAABAAEAAAICTAEAOw==":(t.src=n,n=null)),s.imagesInfo.push({styleWidth:t.style.width,styleHeight:t.style.height,attributeWidth:e,attributeHeight:i,lazySrc:n}),null!==e&&null!==i&&0<parseInt(e)&&0<parseInt(i)?s.imagesStatus.push(this.IMG_LOADING_READY):s.imagesStatus.push(this.IMG_LOADING)}).bind(this)(e[i]);return document.body.offsetWidth,s.images.forEach(function(i,n){var t=function(){s.imagesStatus[n]=i.naturalWidth?this.IMG_FINISHED:this.IMG_FAILURE,this._onImageFinished(s)}.bind(this),e=function(){s.imagesStatus[n]=this.IMG_FAILURE,this._onImageFinished(s)}.bind(this);i.addEventListener("load",t,!1),i.addEventListener("error",e,!1),i.complete&&t(),s.imagesInfo[n].lazySrc||u.expectNaturalImageSize(i,function(t,e){s.imagesStatus[n]=e&&i.naturalWidth?i.complete?this.IMG_FINISHED:this.IMG_READY:this.IMG_FAILURE,this._onImageReady(s)}.bind(this))}.bind(this)),this._onImageReady(s),this._onImageFinished(s),s},_processInsertQueue:function(t){var e,i,n,s,o,r,a=this._insertQueue.lastProcess<(new Date).getTime()-this._insertQueue.maxQueueTime,l=[],d=[],u=this._options.filter,h=[];if(null!==this._insertQueue.timer&&(clearTimeout(this._insertQueue.timer),this._insertQueue.timer=null),t||a){for(m(),e=this._insertQueue.items.shift();e;)d.push(e),e=this._insertQueue.items.shift();for(r=d.length;r--;)for(s=(e=d[r]).item.images.length;s--;)!(n=e.item.imagesInfo[s]).attributeWidth&&e.item.images[s].offsetWidth<40&&e.item.images[s].naturalWidth&&(n.attributeWidth=e.item.images[s].naturalWidth),!n.attributeHeight&&e.item.images[s].offsetHeight<40&&e.item.images[s].naturalHeight&&(n.attributeHeight=e.item.images[s].naturalHeight),(n.attributeWidth||n.attributeHeight)&&(o=getComputedStyle(e.item.images[s]),(parseInt(o.width)<40||"auto"===o.width||n.lazySrc)&&n.attributeWidth&&!n.styleWidth&&l.push({image:e.item.images[s],definition:"width",value:n.attributeWidth+"px"}),(parseInt(o.height)<40||"auto"===o.height||n.lazySrc)&&n.attributeHeight&&!n.styleHeight&&l.push({image:e.item.images[s],definition:"height",value:n.attributeHeight+"px"})),n.lazySrc&&h.push({item:e.item,image:e.item.images[s],src:n.lazySrc});for(i=l.length;i--;)l[i].image.style[l[i].definition]=l[i].value,l[i].image.style.display="none";for(document.body.offsetWidth,i=l.length;i--;)l[i].image.style.display="";for(r=d.length;r--;)(e=d[r]).item.size=[e.contentElement.offsetWidth,e.contentElement.offsetHeight],e.item.ratio=e.item.size[0]/e.item.size[1];for(i=l.length;i--;)l[i].image.style[l[i].definition]="";for(r=d.length;r--;)(e=d[r]).item.status=this.ITEM_INSERTED,e.item.valid=!(!e.item.size[0]||!e.item.size[1]),this._setMatchFilter(e.item,u),e.item.contentElement.classList.remove("gridzyItemInitializing"),e.item.contentElement.classList.add("gridzyItemReady");for(this.render(),r=d.length;r--;)(e=d[r]).item.contentElement.style.visibility="";h.length&&this._addImagesToLazyLoadQueue(h),this._insertQueue.lastProcess=(new Date).getTime()}else this._insertQueue.timer=setTimeout(function(){this._processInsertQueue(!0)}.bind(this),this._insertQueue.maxQuietTime)},_addImagesToLazyLoadQueue:function(t){null===l&&t.length&&(l=[],window.addEventListener("resize",u.processLazyLoading,!1),window.addEventListener("scroll",u.processLazyLoading,!1)),l=l.concat(t),u.processLazyLoading()},_addToInsertQueue:function(t,e){this._insertQueue.items.push({contentElement:t,item:e}),this._processInsertQueue(!1)},_onImageFinished:function(t){var e=t.failures;u.inArray(t.imagesStatus,this.IMG_LOADING)||u.inArray(t.imagesStatus,this.IMG_LOADING_READY)||u.inArray(t.imagesStatus,this.IMG_READY)||(m(),u.inArray(t.imagesStatus,this.IMG_FAILURE)&&(t.failures=!0),t.status===this.ITEM_INSERTED&&e!==t.failures&&this.render(),t.contentElement.classList.remove("gridzyItemLoading"),t.contentElement.classList.add("gridzyItemComplete"))},_onImageReady:function(t){var e=t.failures;t.failures=u.inArray(t.imagesStatus,this.IMG_FAILURE),t.status===this.ITEM_INSERTED&&e!==t.failures&&this.render(),t.status!==this.ITEM_REGISTERED||u.inArray(t.imagesStatus,this.IMG_LOADING)||(t.status=this.ITEM_INSERT_QUEUE,this._addToInsertQueue(t.contentElement,t))},_getOptionParametersFromElement:function(t,e,i){var n,s,o,r,a={},l={};for(s in t=t||this.element,e=e||t.getAttribute("data-gridzy-layout")||this._options.layout,o=t.attributes,n=Gridzy.getDefaultOptions(e))a[s.toLowerCase()]={name:s,value:n[s]};if(i)void 0!==a[s=i.substr(12).toLowerCase()]&&(l.name=a[s].name,l.value=void 0!==o[i]?o[i].value:null);else for(t.classList.contains("gridzyAnimated")&&(l.animate=!0),r=o.length;r--;)"data-gridzy-"===o[r].name.substr(0,12)&&void 0!==a[s=o[r].name.substr(12).toLowerCase()]&&(l[a[s].name]=o[r].value);return l},_updateOptionParameters:function(t){var e,i,n,s,o,r,a,l,d=!1;if(t=t||{},this._options.onBeforeOptionsChanged(this),i=u.objectAssign({},this._options),"object"==typeof t.layout&&null===t.layout&&this._options.layout!==Gridzy._defaultOptions.layout&&(this._options.layout=Gridzy._defaultOptions.layout,d=!0),"string"==typeof t.layout&&"object"==typeof Gridzy._layouts[t.layout]&&Gridzy._layouts[t.layout].constructor===GridzyLayout&&this._options.layout!==t.layout&&(this._options.layout=t.layout,d=!0),n=Gridzy.getDefaultOptions(this._options.layout),d){for(e in this._options)void 0===n[e]&&delete this._options[e];for(e in n)void 0===this._options[e]&&(this._options[e]=n[e]);if(this._options.useOptionAttributes)for(e in s=this._getOptionParametersFromElement(null,this._options.layout))void 0!==n[e]&&void 0===t[e]&&this._options[e]!==s[e]&&(t[e]=s[e])}for(e in n)if(void 0!==t[e]&&null!==t[e])switch(typeof n[e]){case"boolean":this._options[e]=u.isTruly(t[e]);break;case"number":this._options[e]=+t[e];break;default:this._options[e]=t[e]}for(e in"string"==typeof t.filter&&this._options.filter!==t.filter&&u.isValidCssSelector(t.filter)&&(this._options.filter=t.filter),"string"!=typeof t.filterControls||""!==t.filterControls&&!u.isValidCssSelector(t.filterControls)||(this._options.filterControls=t.filterControls),void 0!==t.animate&&null!==t.animate&&(this._options.animate=u.isTruly(t.animate)),void 0!==t.autoConsiderScrollBars&&null!==t.autoConsiderScrollBars&&(this._options.autoConsiderScrollBars=u.isTruly(t.autoConsiderScrollBars)),"function"==typeof t.onBeforeOptionsChanged&&(this._options.onBeforeOptionsChanged=t.onBeforeOptionsChanged),"function"==typeof t.onOptionsChanged&&(this._options.onOptionsChanged=t.onOptionsChanged),"function"==typeof t.onBeforeRender&&(this._options.onBeforeRender=t.onBeforeRender),"function"==typeof t.onRender&&(this._options.onRender=t.onRender),void 0!==t.autoSyncChildListMutation&&null!==t.autoSyncChildListMutation&&(this._options.autoSyncChildListMutation=u.isTruly(t.autoSyncChildListMutation)),void 0!==t.autoSyncAttributesMutation&&null!==t.autoSyncAttributesMutation&&(this._options.autoSyncAttributesMutation=u.isTruly(t.autoSyncAttributesMutation)),void 0!==t.autoSyncChildClassMutation&&null!==t.autoSyncChildClassMutation&&(this._options.autoSyncChildClassMutation=u.isTruly(t.autoSyncChildClassMutation)),t)null===t[e]&&void 0!==n[e]&&(this._options[e]=n[e]);if(i.filter!==this._options.filter)for(o=this._allItems.length;o--;)this._setMatchFilter(this._allItems[o],this._options.filter);if(i.filterControls!==this._options.filterControls||this._options.filterControls&&0===this._filterControls.length){for(a=[].slice.call(this._options.filterControls?document.querySelectorAll(this._options.filterControls):[]),o=this._filterControls.length;o--;)if(!u.inArray(a,this._filterControls[o])){switch(this._filterControls[o].nodeName+this._filterControls[o].type){case"SELECT":case"INPUTcheckbox":case"INPUTradio":this._filterControls[o].removeEventListener("change",this._filterControls[o].gridzyFilterControlHandler);break;case"INPUTbutton":case"INPUTsubmit":case"BUTTONbutton":case"BUTTONsubmit":case"BUTTONreset":this._filterControls[o].removeEventListener("click",this._filterControls[o].gridzyFilterControlHandler);break;default:this._filterControls[o].removeEventListener("input",this._filterControls[o].gridzyFilterControlHandler)}this._filterControls.splice(o,1)}for(o=a.length;o--;)if(!u.inArray(this._filterControls,a[o])){switch(a[o].gridzyFilterControlHandler=this._filterControlEventHandler.bind(this),a[o].nodeName+a[o].type){case"SELECT":case"INPUTcheckbox":case"INPUTradio":a[o].addEventListener("change",a[o].gridzyFilterControlHandler);break;case"INPUTbutton":case"INPUTsubmit":case"BUTTONbutton":case"BUTTONsubmit":case"BUTTONreset":a[o].addEventListener("click",a[o].gridzyFilterControlHandler);break;default:a[o].addEventListener("input",a[o].gridzyFilterControlHandler)}this._filterControls.push(a[o])}}if(m(),this._resetElementMutationObserver(),this.element.classList[this._options.animate?"add":"remove"]("gridzyAnimated"),this._options.useOptionAttributes)for(e in this._options)if(l="data-gridzy-"+e.toLowerCase(),r=this._options[e],void 0!==t[e]&&null===t[e]&&this.element.hasAttribute(l))this.element.removeAttribute(l);else if(n[e]!==this._options[e]||this.element.hasAttribute(l)){switch(typeof r){case"boolean":r=r?"true":"false";break;case"number":r+=""}"string"==typeof r&&this.element.setAttribute(l,r)}this._resetChildMutationObserver(),this._options.onOptionsChanged(this)}},document.addEventListener("DOMContentLoaded",function(){Gridzy._defaultOptions.autoInitOnDomReady&&g(),h.reset()}),"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.gridzy=function(t){return this.each(function(){jQuery(this).data("gridzy",new Gridzy(this,t))})})}(),new GridzyLayout({name:"justified",options:{autoFontSize:!1,desiredHeight:190,hideOnMissingImage:!0,spaceBetween:4,fillLastRow:!0,fillSingleRow:!0},handler:function(t){var e,i,n,s,o,r,a,l,d,u,h,m=!!t.gridzyInstance.getOption("autoFontSize"),c=parseInt(t.gridzyInstance.getOption("desiredHeight")),y=!!t.gridzyInstance.getOption("hideOnMissingImage"),g=parseInt(t.gridzyInstance.getOption("spaceBetween")),p=!!t.gridzyInstance.getOption("fillLastRow"),f=!!t.gridzyInstance.getOption("fillSingleRow"),_=t.items,b=[],I=[],z=t.dimensions.contentBox.width,v=0,O=0,A=[],C=0,E=0;for(e=_.length;e--;)!(s=_[e]).valid||!s.matchFilter||y&&s.imageError?I.unshift(s):(b.unshift(s),s.optWidth=c*s.width/s.height,v+=s.optWidth);for(n=b.length,o=p?v/(Math.round((v+g*n)/(z+g))||1):z,e=n;e--;)O+(s=b[n-1-e]).optWidth/2>o*A.length&&A.push(a={displaySizeY:0,displayPosY:0,ratioAll:0,optWidth:0,items:[]}),O+=s.optWidth,a.optWidth+=s.optWidth,a.ratioAll+=s.aspectRatio,a.items.push(s);for(t.height=0,r=A.length,d=null,e=0;e<r;e++){for(E=C=0,u=z-((l=(a=A[e]).items.length)-1)*g,h=1===r&&f||1<r&&p||e<r-1||a.optWidth>=u,i=0;i<l;i++)(s=a.items[i]).displayPosX=C+i*g,s.displaySizeX=h?Math.round(s.aspectRatio/a.ratioAll*u):Math.round(s.optWidth),C+=s.displaySizeX,h&&i===l-1&&C!==u&&(s.displaySizeX+=u-C),E+=s.displaySizeX/s.aspectRatio;for(a.displaySizeY=Math.round(E/l),a.displayPosY=d?d.displayPosY+d.displaySizeY+g:0,i=0;i<l;i++)(s=a.items[i]).displaySizeY=a.displaySizeY,s.displayPosY=a.displayPosY,s.visible=!0,s.styleToApply="position: absolute; width: "+s.displaySizeX+"px; height: "+s.displaySizeY+"px; left: "+(t.dimensions.padding.left+s.displayPosX)+"px; top: "+(t.dimensions.padding.top+s.displayPosY)+"px; font-size: "+(m?100*s.displaySizeX/s.width+"%":"100%")+"; ";t.height+=a.displaySizeY+(e?g:0),d=a}for(t.styleToApply="height: "+(t.dimensions.actualBox.height-t.dimensions.contentBox.height+t.height)+"px; ",e=I.length;e--;)I[e].visible=!1}}),new GridzyLayout({name:"waterfall",options:{autoFontSize:!1,desiredWidth:250,hideOnMissingImage:!0,horizontalOrder:!1,spaceBetween:4},handler:function(t){var e,i,n,s,o,r,a,l,d=!!t.gridzyInstance.getOption("autoFontSize"),u=parseInt(t.gridzyInstance.getOption("desiredWidth")),h=!!t.gridzyInstance.getOption("hideOnMissingImage"),m=!!t.gridzyInstance.getOption("horizontalOrder"),c=parseInt(t.gridzyInstance.getOption("spaceBetween")),y=0,g=[],p=0,f=t.items,_=[],b=[],I=t.dimensions.contentBox.width;for(o=f.length;o--;)!(l=f[o]).valid||!l.matchFilter||h&&l.imageError?b.push(l):_.push(l);for(i=I-((e=(a=_.length)<(e=Math.round(I/u)||1)?a:e)-1)*c,o=e;o--;)y+=n=i-Math.round(i*o/e)-y,g.push({index:g.length,width:n,left:i-y+o*c,height:0});for(o=a;o--;){if(m)s=g[s&&0<s.index?s.index-1:e-1];else for(s=g[r=e-1];r--;)g[r].height<s.height-2&&(s=g[r]);(l=_[o]).displaySizeX=s.width,l.displaySizeY=Math.round(l.displaySizeX/l.width*l.height),l.displayPosX=s.left,l.displayPosY=s.height+(s.height?c:0),s.height+=l.displaySizeY+(s.height?c:0),p<s.height&&(p=s.height),l.visible=!0,l.styleToApply="position: absolute; width: "+l.displaySizeX+"px; height: "+l.displaySizeY+"px; left: "+(t.dimensions.padding.left+l.displayPosX)+"px; top: "+(t.dimensions.padding.top+l.displayPosY)+"px; font-size: "+(d?100*l.displaySizeX/l.width+"%":"100%")+"; "}for(t.styleToApply="height: "+(t.dimensions.actualBox.height-t.dimensions.contentBox.height+p)+"px; ",o=b.length;o--;)b[o].visible=!1}});